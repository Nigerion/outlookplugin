import React, { useState, useEffect } from "react";
import { makeStyles } from "@fluentui/react-components";
import { AuthorizationForm } from "./AuthorizationForm/AuthorizationForm.jsx";
import AdditionForm from "./AdditionForm/AdditionForm.jsx";
import { clearCookies, getCookie, tokenRefresh } from "./utils.js";

const useStyles = makeStyles({
  title: {
    margin: "20px",
  },
  wrapper: {
    display: "flex",
    flexDirection: "column",
    alignItems: "center",
    height: "800px",
  },
  logo: {
    height: "200px",
    width: "100%",
    maxWidth: "400px",
    fill: "#1d1d1b",
  },
});
const App = () => {
  const styles = useStyles();
  const [isAuth, setIsAuth] = useState(false);
  useEffect(() => {
    const token = getCookie("token");
    const refresh = getCookie("refresh");
    if (token && refresh) {
      setIsAuth(true);
    }
    setInterval(tokenRefresh, 5 * 300000);
  });
  const handleSubmit = () => {
    clearCookies();
  };
  return (
    <div className={styles.wrapper}>
      <div>
        <svg
          id="vision-1"
          data-name="vision"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 583 249"
          className={styles.logo}
        >
          <g id="vision-1-2" data-name="vision">
            <polygon
              class="cls-1"
              points="207.6 117.4 195.6 147.2 195.4 146.9 183.6 117.4 180.2 117.4 194 150.9 197.1 150.9 210.9 117.4 207.6 117.4"
            />
            <rect class="cls-1" x="217.6" y="117.4" width="3.1" height="33.5" />
            <path
              class="cls-1"
              d="M230.9,148.8c.9.9,2,1.5,3.2,2s2.6.7,4.1.7,2.8-.2,4-.7,2.3-1.2,3.2-2.1,1.6-1.9,2.1-3.1.8-2.5.8-3.9-.2-2.4-.5-3.4-.9-1.9-1.6-2.6c-.8-.8-1.7-1.5-2.9-2.1s-2.7-1.2-4.4-1.7c-2.4-.7-4.1-1.5-5.2-2.5-1-.9-1.5-2.2-1.5-3.7s.6-3.2,1.7-4.4,2.6-1.7,4.3-1.7,3.2.6,4.3,1.7,1.7,2.6,1.8,4.3h3.2c0-1.3-.3-2.5-.7-3.5-.5-1.1-1.1-2.1-1.9-2.8-.8-.8-1.8-1.4-2.9-1.8-1.1-.4-2.4-.7-3.7-.7s-2.6.2-3.7.7-2.1,1.1-2.9,1.8c-.8.8-1.4,1.7-1.9,2.8s-.7,2.3-.7,3.6.1,2.2.4,3.1c.3.9.8,1.7,1.4,2.4.7.7,1.6,1.3,2.7,1.9,1.1.6,2.4,1.1,4,1.5,1.4.4,2.6.8,3.6,1.3s1.8,1,2.4,1.5c.6.6,1.1,1.2,1.3,1.9.3.7.4,1.5.4,2.4s-.2,1.9-.5,2.8c-.3.8-.8,1.6-1.4,2.2-.6.6-1.3,1.1-2.1,1.4s-1.7.5-2.7.5c-2.1,0-3.7-.6-4.9-1.9-1.2-1.2-2-2.9-2.2-5.1h-3.3c.1,1.4.4,2.8.9,3.9.5,1.2,1.2,2.3,2.1,3.1h0l-.3.2Z"
            />
            <rect class="cls-1" x="255.5" y="117.4" width="3.1" height="33.5" />
            <path
              class="cls-1"
              d="M297,122c-1.6-1.6-3.4-2.8-5.6-3.8-2.1-.9-4.4-1.4-6.8-1.4s-4.8.5-7,1.4-4.1,2.2-5.7,3.7c-1.6,1.6-2.9,3.4-3.8,5.5-.9,2.1-1.4,4.4-1.4,6.8s.5,4.6,1.4,6.7,2.2,3.9,3.8,5.5,3.5,2.8,5.6,3.7,4.4,1.4,6.8,1.4,4.7-.5,6.8-1.4,4-2.2,5.6-3.7c1.6-1.6,2.9-3.4,3.8-5.5.9-2.1,1.4-4.3,1.4-6.7s-.5-4.6-1.4-6.7-2.2-3.9-3.8-5.5h.3ZM297.9,139.8c-.8,1.8-1.8,3.3-3.1,4.6-1.3,1.3-2.9,2.3-4.6,3.1-1.8.8-3.6,1.2-5.6,1.2s-3.9-.4-5.7-1.2c-1.8-.8-3.3-1.8-4.6-3.1-1.3-1.3-2.4-2.9-3.1-4.6-.8-1.8-1.2-3.7-1.2-5.6s.4-3.8,1.2-5.6c.8-1.8,1.8-3.3,3.1-4.6,1.3-1.3,2.9-2.4,4.6-3.2,1.8-.8,3.6-1.2,5.6-1.2s4,.4,5.8,1.2c1.8.8,3.4,1.8,4.7,3.1,1.3,1.3,2.4,2.9,3.1,4.6s1.2,3.7,1.2,5.7-.4,3.8-1.2,5.6h-.2Z"
            />
            <polygon
              class="cls-1"
              points="336.9 150.9 336.9 117.4 333.8 117.4 333.8 145.8 314.6 117.4 310.3 117.4 310.3 150.9 313.4 150.9 313.4 120.8 333.7 150.9 336.9 150.9"
            />
            <path
              class="cls-1"
              d="M362.1,148.8c.9.9,2,1.5,3.2,2s2.6.7,4.1.7,2.8-.2,4-.7,2.3-1.2,3.2-2.1,1.6-1.9,2.1-3.1.8-2.5.8-3.9-.2-2.4-.5-3.4-.9-1.9-1.6-2.6c-.8-.8-1.7-1.5-2.9-2.1-1.2-.6-2.7-1.2-4.5-1.7-2.4-.7-4.1-1.5-5.2-2.5-1-.9-1.5-2.2-1.5-3.7s.6-3.2,1.7-4.4,2.6-1.7,4.3-1.7,3.2.6,4.3,1.7c1.1,1.1,1.7,2.6,1.8,4.3h3.2c0-1.3-.3-2.5-.7-3.5-.5-1.1-1.1-2.1-1.9-2.8-.8-.8-1.8-1.4-2.9-1.8s-2.4-.7-3.7-.7-2.6.2-3.7.7c-1.1.4-2.1,1.1-2.9,1.8-.8.8-1.5,1.7-1.9,2.8s-.7,2.3-.7,3.6.1,2.2.5,3.1c.3.9.8,1.7,1.5,2.4.7.7,1.6,1.3,2.7,1.9s2.5,1.1,4,1.5c1.4.4,2.6.8,3.6,1.3s1.8,1,2.4,1.5c.6.6,1,1.2,1.3,1.9.3.7.4,1.5.4,2.4s-.2,1.9-.5,2.8c-.3.8-.8,1.6-1.4,2.2s-1.3,1.1-2.1,1.4c-.8.3-1.7.5-2.7.5-2,0-3.7-.6-5-1.9-1.2-1.2-2-2.9-2.2-5.1h-3.3c.1,1.4.4,2.8.9,3.9.5,1.2,1.2,2.3,2.1,3.1h0l-.3.2Z"
            />
            <path
              class="cls-1"
              d="M401.9,136.7c1.4-.3,2.6-.8,3.6-1.6,1.1-.8,1.9-1.8,2.5-3.1s.9-2.8.9-4.5-.4-3.6-1-5c-.7-1.4-1.7-2.5-2.9-3.3-1-.6-2.3-1.1-3.6-1.3-1.4-.3-3.1-.4-5.3-.4h-9.2v33.5h3.1v-13.7h6.6c2.2,0,4.1-.2,5.4-.5h0l-.1-.1ZM389.8,134.5v-14.3h5c1.3,0,2.7,0,4,.1,1.3,0,2.5.4,3.5.8,1,.5,1.9,1.2,2.5,2.2s.9,2.4.9,4.1-.3,2.8-.8,3.7c-.5.9-1.2,1.7-2.1,2.1-.9.5-1.9.8-3,1s-2.3.2-3.6.2h-6.4v.1Z"
            />
            <path
              class="cls-1"
              d="M437.4,139.5h0l4.9,11.4h3.4l-14.4-33.5h-3.6l-14.4,33.5h3.2l4.9-11.4h16ZM422.7,136.5l6.8-15.8,6.7,16h-13.6v-.2h.1Z"
            />
            <path
              class="cls-1"
              d="M452.2,127.3c-.9,2.1-1.3,4.5-1.3,7s.5,4.7,1.3,6.8c.9,2.1,2.1,3.9,3.7,5.5s3.4,2.8,5.6,3.6,4.5,1.3,7,1.3c6.7,0,11.8-3.1,15.2-9.2h-3.4c-1.7,2.2-3.5,3.8-5.4,4.8s-4.1,1.6-6.5,1.6-3.9-.4-5.6-1.2c-1.8-.8-3.3-1.8-4.6-3.1-1.3-1.3-2.3-2.9-3.1-4.6-.8-1.8-1.1-3.7-1.1-5.7s.4-4,1.1-5.8,1.7-3.3,3-4.6,2.8-2.3,4.6-3.1c1.8-.7,3.7-1.1,5.7-1.1,5.1,0,9.1,2.1,11.7,6.3h3.5c-.6-1.4-1.4-2.6-2.4-3.7s-2.2-2.1-3.5-2.9-2.8-1.4-4.4-1.8-3.2-.6-5-.6c-2.5,0-4.8.4-6.9,1.3s-4,2.1-5.5,3.7-2.8,3.4-3.6,5.5h-.1Z"
            />
            <polygon
              class="cls-1"
              points="510.1 120.2 510.1 117.4 491.9 117.4 491.9 150.9 510.1 150.9 510.1 148.1 495 148.1 495 135.3 509.6 135.3 509.6 132.6 495 132.6 495 120.2 510.1 120.2"
            />
            <g>
              <path
                class="cls-1"
                d="M134.7,127.5v20.7c-11.4,0-20.7-9.3-20.7-20.7s9.3-20.7,20.7-20.7,20.7,9.3,20.7,20.7h-20.7Z"
              />
              <path
                class="cls-1"
                d="M134.7,161.1c-18.5,0-33.6-15.1-33.6-33.6s15.1-33.6,33.6-33.6v4.1c-16.3,0-29.5,13.2-29.5,29.5s13.2,29.6,29.5,29.6v4.1-.1Z"
              />
              <path class="cls-1" d="M134.7,174.2c-25.8,0-46.7-20.9-46.7-46.7h4.1c0,23.5,19.1,42.6,42.6,42.6v4.1h0Z" />
            </g>
          </g>
        </svg>
      </div>
      {isAuth === false ? <AuthorizationForm setIsAuth={setIsAuth}></AuthorizationForm> : <AdditionForm></AdditionForm>}
      <div style={{ textAlign: "center", maxWidth: "200px", marginTop: "40px" }}>
        <a style={{ cursor: "pointer" }} onClick={handleSubmit}>
          Очистить Куки
        </a>
      </div>
    </div>
  );
};

export default App;
